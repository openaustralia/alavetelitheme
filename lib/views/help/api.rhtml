<% @title = "Application Programming Interface - API" %>

<%= render :partial => 'sidebar' %>

<div id="left_column_flip">
<h1><%=@title %></h1>

<h2> Introduction </h2>

<p>This page explains how programmers can make other websites and software
interact with <%= site_name %> via an "API".
</p>

<p><%= site_name %> does not have a full API yet, but we are gradually adding
lots of things that are similar in use to an API as they are requested.
</p>

<hr>

<h2> 1. Linking to new requests </h2>

<p>To assist users in making new requests you can link to a pre-filled request form. The details of which public authority the request is addressed to, and the contents of the body of the request message are part of the URL/link.</p>

<p>A link to a new request for a particular public authorit, uses a URL of the form
<%= link_to new_request_to_body_url(:url_name => "defence") , new_request_to_body_url(:url_name => "defence") %>. 
These are the <%= link_to "parameters", "http://en.wikipedia.org/wiki/URL", title: "Wikipedia entry for URL including information on URL syntax" %> you can add to those URLs, either in a normal hyperlink or through a form.

<ul>
    <li> <strong>title</strong> - default summary of the new request.</li>
    <li> <strong>default_letter</strong> - default text of the body of the letter. The salutation (Dear...) and signoff (Yours...) are wrapped round this. </li>
    <li> <strong>body</strong> - as an alternative to default_letter, this sets the default entire text of the request, so you can customise the salutation and signoff. </li>
    <li> <strong>tags</strong> - space separated list of tags, so you can find and link up any requests made later, e.g. <em>openlylocal spending_id:12345</em>. The : indicates it is a machine tag. The values of machine tags may also include colons, useful for URIs.
</ul>
</p>

<p>Text added to these URLs must be <em><%= link_to "URL encoded", "http://en.wikipedia.org/wiki/Percent-encoding", title: "Wikipedia entry for Percent-Encoding" %></em>. You can use the <%= link_to "URL Decoder/Encoder at meyerweb.com", "http://meyerweb.com/eric/tools/dencoder/" title: "URL Decoder/Encoder" %> as a tool to help encode your text.</p>

<p>Within a URL, multiple parameters are divided with a semi-colon ";". For example, the link <%= link_to "https://www.righttoknow.org.au/new/diac/?title=FOI%20Request%20for%20Detail%20Incident&20Report%201-3M2Q3P;body=To%20the%20Department%20of%20Immigration%20and%20Citizenship%2C%0A%0ADear%20Sir%2FMadam%2C%0A%0AUnder%20the%20Freedom%20of%20Information%20Act%201982%20(Cth)%20I%20request%20the%20following%20document%3A%0A%0AIncident%20Detail%20Report%201-3M2Q3P%20from%20the%20Department%27s%20Compliance%2C%20Case%20Management%2C%20Detention%20and%20Settlement%20Portal.%20I%20also%20request%20any%20documents%20attached%20to%20the%20detailed%20report.%0A%0AKind%20Regards%2C%0A%0A****ADD%20YOUR%20NAME%20HERE%20BEFORE%20SENDING%20REQUEST****", "https://www.righttoknow.org.au/new/diac/?title=FOI%20Request%20for%20Detail%20Incident&20Report%201-3M2Q3P;body=To%20the%20Department%20of%20Immigration%20and%20Citizenship%2C%0A%0ADear%20Sir%2FMadam%2C%0A%0AUnder%20the%20Freedom%20of%20Information%20Act%201982%20(Cth)%20I%20request%20the%20following%20document%3A%0A%0AIncident%20Detail%20Report%201-3M2Q3P%20from%20the%20Department%27s%20Compliance%2C%20Case%20Management%2C%20Detention%20and%20Settlement%20Portal.%20I%20also%20request%20any%20documents%20attached%20to%20the%20detailed%20report.%0A%0AKind%20Regards%2C%0A%0A****ADD%20YOUR%20NAME%20HERE%20BEFORE%20SENDING%20REQUEST****", title: "example request for detention centre incident logs" %> uses both the <strong>title</strong> and <strong>body</strong> paramaters.</p>


<hr>

<h2> 2. RSS (actually, Atom) feeds </h2>

<p>There are Atom feeds on most pages which list requests, which you can
use to get updates and links in XML format. Find the URL of the Atom feed in
one of these ways: 
<ul>
    <li>Look for the <img src="/images/feed-16.png" alt=""> RSS feed links.</li>
    <li>Examine the <tt>&lt;link rel="alternate" type="application/atom+xml"&gt;</tt> tag in the head of the HTML. </li>
    <li>Add <tt>/feed</tt> to the start of another URL.
</ul>

<p>In particular, even complicated search queries have Atom feeds.
You can do all sorts of things with them, such as query by authority, by file
type, by date range, or by status. See the <a href="/search">advanced search
tips</a> for details.

<hr>

<h2> 3. JSON structured data </h2>

<p>Quite a few pages have JSON versions, which let you download information about
objects in a structured form. Find them by:
</p>
<ul>
    <li>Adding <tt>.json</tt> to the end of the URL. </li>
    <li>Look for the <tt>&lt;link rel="alternate" type="application/json"&gt;</tt> tag in the head of the HTML. </li>
</ul>

<p>Requests, users and authorities all have JSON versions containing basic
information about them. Every Atom feed has a JSON equivalent, containing
information about the list of events in the feed.
</p>

<hr>
<h2> 4. Spreadsheet of all authorities </h2>

<p>
A spreadsheet file listing every body in <%= site_name %> is available:
<%= link_to "all-authorities.csv", all_public_bodies_csv_url() %>
</p>

<hr>

<p>Please <a href="/help/contact">contact us</a> if you need an API feature that isn't there yet. It's
very much a work in progress, and we do add things when people ask us to.</p>

<div id="hash_link_padding"></div>

</div>
